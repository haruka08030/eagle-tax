# Eagle Tax - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter Web App                          â”‚
â”‚                  (ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œ)                             â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   UI Layer   â”‚         â”‚  State Mgmt  â”‚                  â”‚
â”‚  â”‚  (Widgets)   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   (State)    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                         â”‚                          â”‚
â”‚         â”‚                         â–¼                          â”‚
â”‚         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Supabase Client  â”‚                 â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supabase Cloud                         â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Edge Functions                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚  fetch-shopify-orders                      â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - CORSå¯¾å¿œ                                â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†                         â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†                     â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                               â”‚
â”‚                              â”‚ Shopify API Call              â”‚
â”‚                              â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           PostgreSQL Database                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚  states ãƒ†ãƒ¼ãƒ–ãƒ«                           â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - code (å·ã‚³ãƒ¼ãƒ‰)                         â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - name (å·å)                             â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - sales_threshold (å£²ä¸ŠåŸºæº–)              â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - txn_threshold (å–å¼•æ•°åŸºæº–)              â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  - logic_type (åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯)               â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS (Admin API)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Shopify Store                            â”‚
â”‚                  (eagle-tax-dev-01)                         â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Orders Data                             â”‚   â”‚
â”‚  â”‚  - created_at (æ³¨æ–‡æ—¥æ™‚)                             â”‚   â”‚
â”‚  â”‚  - total_price (å£²ä¸Šé¡)                              â”‚   â”‚
â”‚  â”‚  - shipping_address (é…é€å…ˆä½æ‰€)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚

```
Flutter App
  â”‚
  â”œâ”€â–º SupabaseåˆæœŸåŒ–
  â”‚     â””â”€â–º SUPABASE_URL, SUPABASE_ANON_KEY
  â”‚
  â””â”€â–º å·ãƒ‡ãƒ¼ã‚¿å–å¾—
        â””â”€â–º SELECT * FROM states
              â””â”€â–º 51å·ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
```

### 2. ãƒªã‚¹ã‚¯è¨ºæ–­å®Ÿè¡Œæ™‚

```
Flutter App
  â”‚
  â”œâ”€â–º æœŸé–“è¨ˆç®— (ç›´è¿‘12ãƒ¶æœˆ)
  â”‚
  â”œâ”€â–º Edge Functionå‘¼ã³å‡ºã— (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³)
  â”‚     â”‚
  â”‚     â”œâ”€â–º Page 1: fetch-shopify-orders
  â”‚     â”‚     â””â”€â–º Shopify API: GET /orders.json?limit=250
  â”‚     â”‚           â””â”€â–º 250ä»¶ã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ + Link header
  â”‚     â”‚
  â”‚     â”œâ”€â–º Page 2: fetch-shopify-orders
  â”‚     â”‚     â””â”€â–º Shopify API: GET /orders.json?page_info=xxx
  â”‚     â”‚           â””â”€â–º 250ä»¶ã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ + Link header
  â”‚     â”‚
  â”‚     â””â”€â–º Page N: fetch-shopify-orders
  â”‚           â””â”€â–º Shopify API: GET /orders.json?page_info=yyy
  â”‚                 â””â”€â–º æ®‹ã‚Šã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿
  â”‚
  â”œâ”€â–º æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  â”‚     â””â”€â–º created_at < 12ãƒ¶æœˆå‰ â†’ é™¤å¤–
  â”‚
  â”œâ”€â–º å·ã”ã¨ã«é›†è¨ˆ
  â”‚     â”œâ”€â–º å£²ä¸Šé¡ã®åˆè¨ˆ
  â”‚     â””â”€â–º å–å¼•å›æ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ
  â”‚
  â”œâ”€â–º Nexusåˆ¤å®š
  â”‚     â””â”€â–º StateThreshold.checkNexus()
  â”‚           â”œâ”€â–º SALES_ONLY: å£²ä¸Š >= åŸºæº–å€¤
  â”‚           â”œâ”€â–º OR: å£²ä¸Š >= åŸºæº–å€¤ || å–å¼•æ•° >= åŸºæº–å€¤
  â”‚           â”œâ”€â–º AND: å£²ä¸Š >= åŸºæº–å€¤ && å–å¼•æ•° >= åŸºæº–å€¤
  â”‚           â””â”€â–º NONE: false (å…ç¨å·)
  â”‚
  â””â”€â–º çµæœè¡¨ç¤º
        â”œâ”€â–º å±é™ºãªå· (NEXUS REACHED)
        â””â”€â–º å®‰å…¨ãªå· (Safe)
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### èªè¨¼æƒ…å ±ã®ç®¡ç†

| æƒ…å ± | ä¿å­˜å ´æ‰€ | ç”¨é€” |
|------|----------|------|
| `SUPABASE_URL` | `.env` (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ) | Supabaseã¸ã®æ¥ç¶š |
| `SUPABASE_ANON_KEY` | `.env` (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ) | Supabaseèªè¨¼ |
| `SHOPIFY_SHOP_NAME` | `.env` (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ) | Edge Functionã¸æ¸¡ã™ |
| `SHOPIFY_ACCESS_TOKEN` | `.env` (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ) | Edge Functionã¸æ¸¡ã™ |

**æ³¨æ„**: å°†æ¥çš„ã«ã¯ã€Shopifyèªè¨¼æƒ…å ±ã‚’Supabaseã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ç§»è¡Œã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‹ã‚‰å®Œå…¨ã«å‰Šé™¤ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### CORSå¯¾ç­–

**å•é¡Œ**: Shopify Admin APIã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ã„ãªã„

**è§£æ±ºç­–**: Supabase Edge Functionsã‚’ä½¿ç”¨
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§APIã‚’å‘¼ã³å‡ºã—
- CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é©åˆ‡ã«è¨­å®š
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã¯Edge Functionã®ã¿ã‚’å‘¼ã³å‡ºã—

### ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ

```
ãƒ–ãƒ©ã‚¦ã‚¶
  â”‚ (HTTPS)
  â”œâ”€â–º Supabase Edge Function
  â”‚     â”‚ (ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰)
  â”‚     â””â”€â–º Shopify Admin API
  â”‚           â””â”€â–º æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿
  â”‚
  â””â”€â–º Supabase PostgreSQL
        â””â”€â–º å·ãƒ‡ãƒ¼ã‚¿
```

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

- **å•é¡Œ**: å¤§é‡ã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åº¦ã«å–å¾—ã™ã‚‹ã¨é…ã„
- **è§£æ±º**: 250ä»¶ãšã¤å–å¾—ã—ã€é †æ¬¡å‡¦ç†
- **å¾…æ©Ÿæ™‚é–“**: 500msï¼ˆAPI Rate Limitå¯¾ç­–ï¼‰

### 2. æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

- **å•é¡Œ**: å…¨æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹ã¨é…ã„
- **è§£æ±º**: ç›´è¿‘12ãƒ¶æœˆã®ã¿ã‚’å¯¾è±¡
- **åŠ¹æœ**: å‡¦ç†æ™‚é–“ã‚’å¤§å¹…ã«çŸ­ç¸®

### 3. Edge Functions

- **ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ**: 1-2ç§’
- **ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ**: 100-300ms
- **ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: è‡ªå‹•

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ

```dart
// StateThreshold.checkNexus() ã®ãƒ†ã‚¹ãƒˆ
test('SALES_ONLY logic', () {
  final threshold = StateThreshold(
    code: 'CA',
    name: 'California',
    salesThreshold: 500000,
    txnThreshold: null,
    logicType: 'SALES_ONLY',
  );
  
  expect(threshold.checkNexus(
    totalSales: 600000,
    transactionCount: 50,
  ), true);
});
```

### çµ±åˆãƒ†ã‚¹ãƒˆ

```dart
// Edge Functionã®çµ±åˆãƒ†ã‚¹ãƒˆ
testWidgets('Fetch orders from Edge Function', (tester) async {
  final response = await supabase.functions.invoke(
    'fetch-shopify-orders',
    body: {
      'shopName': 'test-shop',
      'accessToken': 'test-token',
    },
  );
  
  expect(response.status, 200);
  expect(response.data['orders'], isNotEmpty);
});
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### é–‹ç™ºç’°å¢ƒ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§Supabaseã‚’èµ·å‹•
supabase start

# Edge Functionã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œ
supabase functions serve fetch-shopify-orders

# Flutterã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œ
flutter run -d chrome
```

### æœ¬ç•ªç’°å¢ƒ

```bash
# Edge Functionã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
supabase functions deploy fetch-shopify-orders

# Flutterã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰
flutter build web

# Webãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã«ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆä¾‹: Vercel, Netlifyï¼‰
```

---

## ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ç¾åœ¨ã®åˆ¶é™

- **Shopify API**: 2ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’
- **Supabase Edge Functions**: ãƒ•ã‚§ã‚¢ãƒ¦ãƒ¼ã‚¹
- **PostgreSQL**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†

### å°†æ¥ã®æ‹¡å¼µ

1. **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«Shopifyèªè¨¼æƒ…å ±ã‚’ä¿å­˜
   - Row Level Security (RLS) ã§æ¨©é™ç®¡ç†

2. **ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†**
   - å®šæœŸçš„ã«æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦é«˜é€ŸåŒ–

3. **é€šçŸ¥æ©Ÿèƒ½**
   - NexusåŸºæº–ã«é”ã—ãŸã‚‰é€šçŸ¥
   - ãƒ¡ãƒ¼ãƒ«ã€Slackã€Webhookãªã©

---

## ğŸ”§ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### ãƒ­ã‚°ç›£è¦–

```bash
# Edge Functionã®ãƒ­ã‚°ã‚’ç¢ºèª
supabase functions logs fetch-shopify-orders --follow

# ã‚¨ãƒ©ãƒ¼ã®ã¿è¡¨ç¤º
supabase functions logs fetch-shopify-orders --filter error
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```sql
-- å·ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°
UPDATE states 
SET sales_threshold = 600000 
WHERE code = 'NY';

-- æ–°ã—ã„å·ã®è¿½åŠ 
INSERT INTO states (code, name, sales_threshold, txn_threshold, logic_type)
VALUES ('XX', 'New State', 500000, 100, 'OR');
```

---

## ğŸ“š æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ç”¨é€” |
|---------|------|------|
| **Frontend** | Flutter (Web) | UIã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯ |
| **Backend** | Supabase Edge Functions | APIãƒ—ãƒ­ã‚­ã‚· |
| **Database** | PostgreSQL (Supabase) | å·ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
| **API** | Shopify Admin API | æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿å–å¾— |
| **Language** | Dart, TypeScript | ã‚¢ãƒ—ãƒªã¨Edge Function |
| **Hosting** | Vercel / Netlify | Webãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° |

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼**: Supabase Authã‚’ä½¿ç”¨
2. **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ**: è¤‡æ•°ã®Shopifyã‚¹ãƒˆã‚¢ã«å¯¾å¿œ
3. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–
4. **ã‚¢ãƒ©ãƒ¼ãƒˆ**: åŸºæº–è¶…éæ™‚ã®è‡ªå‹•é€šçŸ¥
5. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: CSV/PDFãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

---

## ğŸ“ ã¾ã¨ã‚

Eagle Taxã¯ã€Supabase Edge Functionsã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§:

âœ… **ã‚»ã‚­ãƒ¥ã‚¢**: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’éš è”½  
âœ… **é«˜é€Ÿ**: Edge Functionsã§ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·  
âœ… **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«**: è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°  
âœ… **ä¿å®ˆæ€§**: ã‚¯ãƒªãƒ¼ãƒ³ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£  

ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
